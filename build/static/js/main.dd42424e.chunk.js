(this.webpackJsonprovercontrol=this.webpackJsonprovercontrol||[]).push([[0],{17:function(e,t,i){},18:function(e,t,i){},19:function(e,t,i){},20:function(e,t,i){"use strict";i.r(t);var s=i(0),a=i(2),r=i.n(a),n=i(6),c=i.n(n),o=(i(17),i(18),i(1)),l=i(7),d=i(8),v=i(4),h=i(11),u=i(10),b=i(3),f=i.n(b),p=function(e){return Object(s.jsx)("div",{className:"cntButonsGame",children:Object(s.jsx)("button",{onClick:function(){var t=e.resetGame;f.a.fire({title:"Vols reiniciar la simulaci\xf3?",text:"Perdr\xe0s les dades de la simulaci\xf3 actual",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, tornem a comen\xe7ar!",cancelButtonText:"No, seguir\xe9 endavant!"}).then((function(e){e.isConfirmed&&(t(!0),f.a.fire("Nova simulaci\xf3 iniciada!","S'ha traslladat el rover a la nova posici\xf3.","success"))}))},children:"reinicia simulaci\xf3"})})},j=function(e){var t=e.roverInfo.directions,i=e.roverInfo.directionsLabels;return Object(s.jsxs)("div",{className:"cntDirectionButtons",children:[Object(s.jsx)("div",{className:"titleDirectionButtons",children:"direcci\xf3 rover"}),Object(s.jsx)("div",{className:"cntButtons",children:t.map((function(a,r){return Object(s.jsx)("div",{className:"cntButton ".concat(a),children:Object(s.jsx)("button",{className:t[r]===e.roverInfo.direction?"".concat(a," active"):"".concat(a),name:i[r],onClick:function(){return t="".concat(a),void(0,e.changeDirection)(t);var t},children:a})},r)}))})]})},O=i(9),m=function(e){return Object(s.jsxs)("div",{className:"cntLegend",children:[Object(s.jsx)("div",{className:"titleLegend",children:"Llegenda:"}),Object(s.jsxs)("div",{className:"cntLegendItem",children:[Object(s.jsx)("div",{className:"icoRover"}),Object(s.jsx)("div",{className:"cntTextItemLegend",children:"rover"})]}),Object(s.jsxs)("div",{className:"cntLegendItem",children:[Object(s.jsx)("div",{className:"icoObstacle"}),Object(s.jsx)("div",{className:"cntTextItemLegend",children:"obstacle"})]}),Object(s.jsxs)("div",{className:"cntLegendItem",children:[Object(s.jsx)("div",{className:"icoCasella"}),Object(s.jsx)("div",{className:"cntTextItemLegend",children:"casella 5 metres"})]})]})},x=function(e){var t=Object(a.useState)(""),i=Object(O.a)(t,2),r=i[0],n=i[1];return Object(a.useEffect)((function(){var t=e.roverInfo;t&&n(t.directionsLabels[t.directions.indexOf(t.direction)])}),[e]),Object(s.jsxs)("div",{className:"cntPanelInfo",children:[Object(s.jsxs)("div",{className:"itemInfo",children:[Object(s.jsx)("div",{className:"title",children:"Direcci\xf3: "}),Object(s.jsx)("div",{className:"value",children:r})]}),Object(s.jsxs)("div",{className:"itemInfo",children:[Object(s.jsx)("div",{className:"title",children:"Ubicaci\xf3(X): "}),Object(s.jsx)("div",{className:"value",children:e.roverInfo.pos_x/2})]}),Object(s.jsxs)("div",{className:"itemInfo",children:[Object(s.jsx)("div",{className:"title",children:"Ubicaci\xf3(Y): "}),Object(s.jsx)("div",{className:"value",children:e.roverInfo.pos_y/2})]}),Object(s.jsx)(m,Object(o.a)({},e))]})},_=(i(19),function(e){Object(h.a)(i,e);var t=Object(u.a)(i);function i(){var e;return Object(l.a)(this,i),(e=t.call(this)).defineObstacles=function(t){for(var i=e.state.rockets,s=[],a=function(e){var i=Math.ceil(0),a=t.length,n=Math.floor(Math.random()*(a-i+1))+i;s.find((function(e){return e===n}))?e--:s.push(n),r=e},r=0;r<i;r++)a(r);e.setState(Object(o.a)(Object(o.a)({},e.state),{},{obstacles:s}),(function(){e.createGameBoard(t)}))},e.createGameBoard=function(t){var i=e.state.obstacles,s=e.canvasRef.current.getContext("2d");t.map((function(t,a){s.strokeStyle=e.gridColor,i.find((function(e){return e===a}))?(s.fillStyle=e.obstacleColor,s.fillRect(t.coord_x,t.coord_y,e.sizeAreaDivider,e.sizeAreaDivider)):s.strokeRect(t.coord_x,t.coord_y,e.sizeAreaDivider,e.sizeAreaDivider)})),e.initialPositionRover()},e.canvasRef=r.a.createRef(),e.areaDivider=5,e.wide_planet=200,e.height_planet=200,e.sizeAreaDivider=10,e.speedMovements=200,e.obstacleColor="red",e.gridColor="green",e.planetColor="brown",e.pathColor="brown",e.state={titleApp:"Mars Rover Mission",wide_planet:e.wide_planet/e.areaDivider,height_planet:e.height_planet/e.areaDivider,rockets:50,tableHeight:0,tableWidth:0,areas:[],obstacles:[],lastOrders:"",roverState:{direction:"N",pos_x:0,pos_y:0,color:"#000",directions:["N","W","E","S"],directionsLabels:["Nord","Oest","Est","Sud"]}},e.setVehicleDirection=e.setVehicleDirection.bind(Object(v.a)(e)),e.defineTable=e.defineTable.bind(Object(v.a)(e)),e.setOrders=e.setOrders.bind(Object(v.a)(e)),e.sendOrders=e.sendOrders.bind(Object(v.a)(e)),e}return Object(d.a)(i,[{key:"defineTable",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t){var i=this.state.roverState;i.direction="N",this.setState({roverState:i})}var s=2*this.height_planet+2*this.sizeAreaDivider,a=2*this.wide_planet+2*this.sizeAreaDivider;this.setState(Object(o.a)(Object(o.a)({},this.state),{},{tableHeight:s,tableWidth:a}),(function(){var t=e.canvasRef.current.getContext("2d");t.fillStyle=e.planetColor,t.fillRect(0,0,s,a),e.createAreasMapPlanet()}))}},{key:"createAreasMapPlanet",value:function(){for(var e=this,t=this.state,i=t.tableHeight,s=t.tableWidth,a=[],r=this.sizeAreaDivider;r<i-this.sizeAreaDivider;r+=this.sizeAreaDivider)for(var n=this.sizeAreaDivider;n<s-this.sizeAreaDivider;n+=this.sizeAreaDivider){var c={coord_x:n,coord_y:r};a.push(c)}this.setState(Object(o.a)(Object(o.a)({},this.state),{},{areas:a}),(function(){e.defineObstacles(a)}))}},{key:"checkOrders",value:function(e){var t=this,i=this.state.lastOrders;return new Promise((function(s,a){""===e&&s(!1);for(var r=["F","R","L"],n=!0,c=function(t){var i=e.charAt(t);void 0===r.find((function(e){return e===i}))&&(n=!1)},l=0;l<e.length;l++)c(l);n?(i=e,t.setState(Object(o.a)(Object(o.a)({},t.state),{},{lastOrders:i}),(function(){s(n)}))):s(n)}))}},{key:"updatePanelGame",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.canvasRef.current,s=i.getContext("2d");s.fillStyle=e.color,s.fillRect(e.pos_x,e.pos_y,this.sizeAreaDivider,this.sizeAreaDivider),t&&(s.fillStyle=this.pathColor,s.strokeStyle=this.gridColor,s.fillRect(t.pos_x,t.pos_y,this.sizeAreaDivider,this.sizeAreaDivider),s.strokeRect(t.pos_x,t.pos_y,this.sizeAreaDivider,this.sizeAreaDivider))}},{key:"initialPositionRover",value:function(){var e=this,t=this.state,i=t.roverState,s=t.obstacles,a=t.areas,r=Math.ceil(0),n=a.length,c=0,l=function(){var e=Math.floor(Math.random()*(n-r+1))+r;s.find((function(t){return t===e}))||(c=e)};do{l()}while(0===c);a[c]&&(i.pos_y=a[c].coord_y,i.pos_x=a[c].coord_x),10===i.pos_y?(i.pos_y+=this.sizeAreaDivider,i.direction="S"):400===i.pos_y&&(i.pos_y-=this.sizeAreaDivider,i.direction="N"),10===i.pos_x?i.pos_x+=this.sizeAreaDivider:400===i.pos_x&&(i.pos_x-=this.sizeAreaDivider),this.setState(Object(o.a)(Object(o.a)({},this.state),{},{roverState:i}),(function(){return e.updatePanelGame(i)}))}},{key:"moveRover",value:function(){var e,t,i,s=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r={},n=this.state,c=n.roverState,l=n.obstacles;switch(r.pos_x=c.pos_x,r.pos_y=c.pos_y,c.direction){case"N":switch(a){case"F":t=c.pos_y-this.sizeAreaDivider,e=c.pos_x,i="frontal";break;case"L":e=c.pos_x-this.sizeAreaDivider,t=c.pos_y,i="cap a l'esquerra";break;case"R":e=c.pos_x+this.sizeAreaDivider,t=c.pos_y,i="cap a la dreta"}break;case"S":switch(a){case"F":t=c.pos_y+this.sizeAreaDivider,e=c.pos_x,i="frontal";break;case"L":e=c.pos_x+this.sizeAreaDivider,t=c.pos_y,i="cap a l'esquerra";break;case"R":e=c.pos_x-this.sizeAreaDivider,t=c.pos_y,i="cap a la dreta"}break;case"E":switch(a){case"F":t=c.pos_y,e=c.pos_x+this.sizeAreaDivider,i="frontal";break;case"L":e=c.pos_x,t=c.pos_y-this.sizeAreaDivider,i="cap a l'esquerra";break;case"R":e=c.pos_x,t=c.pos_y+this.sizeAreaDivider,i="cap a la dreta"}break;case"W":switch(a){case"F":t=c.pos_y,e=c.pos_x-this.sizeAreaDivider,i="frontal";break;case"L":e=c.pos_x,t=c.pos_y+this.sizeAreaDivider,i="cap a l'esquerra";break;case"R":e=c.pos_x,t=c.pos_y-this.sizeAreaDivider,i="cap a la dreta"}}this.controlPlanetLimits(e,t).then((function(a){a?s.preventColision(e,t,l).then((function(a){a?(c.pos_y=t,c.pos_x=e,s.setState(Object(o.a)(Object(o.a)({},s.state),{},{roverState:c}),s.updatePanelGame(c,r))):(clearInterval(s.timerActionsId),f.a.fire({icon:"error",title:"Ups...",text:"S'ha evitat un accident, s'ha trobat un obstacle en l'\xfaltim moviment ".concat(i," !"),position:"top-end"}).then((function(e){s.setFocusInput()})))})):(clearInterval(s.timerActionsId),f.a.fire({icon:"info",title:"Ups...",text:"Has arribat als l\xedmits del planeta, en l'\xfaltim moviment ".concat(i,", la seq\xfc\xe8ncia s'ha avortat! Pots canviar la direcci\xf3 del rover per tornar enrere."),position:"top-end"}).then((function(e){s.setFocusInput()})))}))}},{key:"controlPlanetLimits",value:function(e,t){return new Promise((function(i,s){i(!(e<10||e>400||t<10||t>400))}))}},{key:"preventColision",value:function(e,t,i){var s=this.state.areas;return new Promise((function(a,r){var n=s.indexOf(s.find((function(i){return i.coord_x===e&&i.coord_y===t})));a(!i.find((function(e){return e===n})))}))}},{key:"launchMovements",value:function(e){var t=this,i=0,s=e.length;this.timerActionsId=setInterval((function(){t.moveRover(e.charAt(i)),++i===s&&(clearInterval(t.timerActionsId),t.setState(Object(o.a)(Object(o.a)({},t.state),{},{lastOrders:""})),t.setFocusInput())}),this.speedMovements)}},{key:"setVehicleDirection",value:function(e){var t=this.state.roverState;t.direction=e,this.setState(Object(o.a)(Object(o.a)({},this.state),{},{roverState:t}))}},{key:"setOrders",value:function(e){var t=e.target.value.toUpperCase();this.setState(Object(o.a)(Object(o.a)({},this.state),{},{lastOrders:t}))}},{key:"sendOrders",value:function(){var e=this,t=this.state.lastOrders;this.checkOrders(t).then((function(i){var s;!0===i?f.a.fire({title:"Transmetent ordres al rover",timer:1e3,timerProgressBar:!0,position:"bottom",didOpen:function(){f.a.showLoading(),s=setInterval((function(){var e=f.a.getContent();if(e){var t=e.querySelector("b");t&&(t.textContent=f.a.getTimerLeft())}}),100)},willClose:function(){clearInterval(s)}}).then((function(){e.launchMovements(t)})):f.a.fire({icon:"error",title:"Ups...",text:"No s'han entrat ordres v\xe0lides",position:"top"}).then((function(t){e.setState(Object(o.a)(Object(o.a)({},e.state),{},{lastOrders:""})),e.setFocusInput()}))}))}},{key:"setFocusInput",value:function(){document.getElementById("inputOrders").focus()}},{key:"componentDidMount",value:function(){this.defineTable(),this.setFocusInput()}},{key:"render",value:function(){var e=this.state,t=e.roverState,i=e.titleApp,a=e.lastOrders,r=e.tableHeight,n=e.tableWidth;return Object(s.jsxs)("div",{className:"cntPlanetGame",children:[Object(s.jsxs)("div",{className:"cntGame",children:[Object(s.jsx)("div",{className:"titleGame",children:"".concat(i," - ").concat(this.wide_planet,"x").concat(this.height_planet,"m")}),Object(s.jsx)("canvas",{id:"canvas",ref:this.canvasRef,height:"".concat(r,"px"),width:"".concat(n,"px")})]}),Object(s.jsxs)("div",{className:"cntControls",children:[Object(s.jsxs)("div",{className:"cntInputOrders",children:[Object(s.jsx)("input",{placeholder:"esperant instruccions",id:"inputOrders",name:"lastOrders",type:"text",value:a,onChange:this.setOrders}),Object(s.jsx)("button",{name:"sendOrders",type:"button",onClick:this.sendOrders,children:"enviar instruccions"})]}),Object(s.jsx)("div",{className:"cntInstructions",children:Object(s.jsx)("div",{children:"F: Davant | L: Esquerra | R: Dreta"})}),Object(s.jsxs)("div",{className:"PanelsVehicle",children:[Object(s.jsx)(x,{roverInfo:t}),Object(s.jsx)(j,{roverInfo:t,changeDirection:this.setVehicleDirection})]}),Object(s.jsx)(p,{resetGame:this.defineTable})]})]})}}]),i}(a.Component));var y=function(){return Object(s.jsx)("div",{className:"App",children:Object(s.jsx)(_,{})})};c.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(y,{})}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.dd42424e.chunk.js.map